<!-- <script>
  function strip(str, remove) {
    while (str.length > 0 && remove.indexOf(str.charAt(0)) != -1) {
      str = str.substr(1);
    }
    while (str.length > 0 && remove.indexOf(str.charAt(str.length - 1)) != -1) {
      str = str.substr(0, str.length - 1);
    }
    return str;
  }

  function scroll() {
    console.log('scroll');
    window.scrollTo({
      left: 0, 
      top: window.innerHeight,
      behavior: 'smooth'
    });
    sessionStorage.removeItem('forceCheckScroll');
  }

  const forceCheckScroll = sessionStorage.getItem('forceCheckScroll') === 'true';
  const checkScroll = strip(window.location.pathname, '/') !== strip('{{ site.baseurl }}', '/');

  if (forceCheckScroll || checkScroll) {
    const maxWidth = "(max-width: 48rem)";
    const result = window.matchMedia(maxWidth);
    if (result.matches) {
      scroll();
    } else {
      result.addListener((match) => {
        if (match.media == maxWidth) {
          if (match.matches) {
            scroll();
          }
        }
      });
    }
  }
</script> -->

<!-- back-to-top button -->
<button id="backToTop" class="back-to-top" aria-label="Back to top" title="Back to top">
  <i class="fas fa-arrow-up" aria-hidden="true"></i>
</button>

<style>
  .back-to-top{
    position: fixed;
    right: max(28px, env(safe-area-inset-right));
    bottom: calc(28px + env(safe-area-inset-bottom));
    width: 56px;              /* ↑ 更大 */
    height: 56px;             /* ↑ 更大 */
    border: 0;
    border-radius: 50%;
    background: #7a7a7a;      /* 灰色底 */
    color: #fff;
    display: grid;
    place-items: center;
    box-shadow: 0 8px 24px rgba(0,0,0,.18);
    cursor: pointer;
    z-index: 1100;

    font-size: 20px;          /* 图标尺寸更大 */
    /* 初始隐藏 + 动画 */
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px);
    transition: opacity .2s ease, transform .2s ease, visibility .2s ease, background-color .2s ease;
  }
  .back-to-top:hover{
    background: #5f5f5f;      /* 悬停更深一点的灰 */
  }
  .back-to-top.show{
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }
  .back-to-top:focus{
    outline: 2px solid rgba(122,122,122,.45);
    outline-offset: 2px;
  }

  @media (prefers-reduced-motion: reduce){
    html{ scroll-behavior: auto; }
    .back-to-top{ transition: none; }
  }
</style>

<script>
  (function () {
    var btn, ticking = false;
    var showAt = 200; // 滚动超过多少像素显示按钮

    function onScroll() {
      if (ticking) return;
      ticking = true;
      requestAnimationFrame(function () {
        if (window.scrollY > showAt) btn.classList.add('show');
        else btn.classList.remove('show');
        ticking = false;
      });
    }

    function onClick() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    document.addEventListener('DOMContentLoaded', function () {
      btn = document.getElementById('backToTop');
      if (!btn) return;

      window.addEventListener('scroll', onScroll, { passive: true });
      btn.addEventListener('click', onClick);
      onScroll(); // 初始化一次
    });
  })();
</script>


